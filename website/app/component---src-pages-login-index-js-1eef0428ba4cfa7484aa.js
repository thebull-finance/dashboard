"use strict";(self.webpackChunkzignaly_webapp=self.webpackChunkzignaly_webapp||[]).push([[861],{87957:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var a=n(67294),r=n(81203),l=n(65186),s=n(66735),i=n(48634),o=n(42656),c=n.n(o),m=n(82245),u=n(48110),f=n(8474),p=n(13470),d=(n(17727),n(60454)),g=n(82825),E=n(45850),Z=n(19199),y=n(66718),x=n(80951),w=n(34141),h=n(46706),b=function(){var e=(0,a.useState)(!1),t=e[0],n=e[1],r=(0,g.cI)(),l=r.errors,s=r.handleSubmit,o=r.register,p=(0,Z.I0)(),b=(0,h.xX)().executeRecaptcha,v=function(){var e=(0,i.Z)(c().mark((function e(t){var a,r,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(!0),a=t.gRecaptchaResponse||"",r=2,a){e.next=8;break}return e.next=6,b("forgotPassword");case 6:a=e.sent,r=3;case 8:l={email:t.email,array:!0,gRecaptchaResponse:a,c:r},E.Z.forgotPasswordStep1(l).then((function(){p(p((0,y.O7)("alert.forgotpassword.step1.title","alert.forgotpassword.step1.body")))})).catch((function(e){p((0,y.jx)(e))})).finally((function(){n(!1)}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.createElement("form",{method:"post",onSubmit:s(v)},a.createElement(m.Z,{alignItems:"center",className:"forgotPasswordForm",display:"flex",flexDirection:"column",justifyContent:"center"},a.createElement(d.Z,{variant:"h3"},a.createElement(x.Z,{id:"forgotPassword.title"})),a.createElement(m.Z,{alignItems:"start",className:"inputBox",display:"flex",flexDirection:"column",justifyContent:"start"},a.createElement("label",{className:"customLabel"},a.createElement(x.Z,{id:"forgotPassword.subtitle"})),a.createElement(u.Z,{className:"customInput",error:l.email,fullWidth:!0,inputRef:o({required:!0,pattern:w.HN}),name:"email",type:"email",variant:"outlined"}),l.email&&a.createElement("span",{className:"errorText"},a.createElement(x.Z,{id:"security.email.error.invalid"}))),a.createElement(m.Z,{className:"inputBox"},a.createElement(f.Z,{className:"full submitButton",loading:t,onClick:function(){s(v)},type:"submit"},a.createElement(x.Z,{id:"action.recover"})))))},v=n(19504),N=n(1996),C=n(39433),k=n(92058),R=n(87306),I=n(94189),S=function(){var e=(0,Z.I0)(),t=(0,a.useState)(!1),n=t[0],r=t[1],l=(0,a.useState)(!1),o=l[0],d=l[1],S=(0,a.useState)(!1),j=S[0],B=S[1],D=(0,a.useState)(null),F=D[0],M=D[1],z=(0,a.useState)(!1),P=z[0],q=z[1],L=(0,s.Z)(),T=(0,g.cI)({mode:"onBlur",reValidateMode:"onChange"}),A=T.handleSubmit,H=T.errors,O=T.register,U=(0,h.xX)().executeRecaptcha,W=(0,a.useRef)(null),X="undefined"!=typeof window&&window.navigator.userAgent.toLowerCase().includes("checkly");if(!(0,k.Z)())return null;var _=function(t){t.emailUnconfirmed?d(!0):t.ask2FA||t.isUnknownDevice||t.disabled?(B(!0),q(!1)):e((0,v.ry)(t,"login"))},V=function(){e((0,v.ry)(F,"login"))},G=function(){var t=(0,i.Z)(c().mark((function t(n){var a,r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(q(!0),a=n.gRecaptchaResponse||"",r=2,X||a){t.next=8;break}return t.next=6,U("login");case 6:a=t.sent,r=3;case 8:E.Z.userLogin(Object.assign({},n,{gRecaptchaResponse:a,c:r})).then((function(e){M(e),_(e),W.current=null})).catch((function(t){e((0,y.jx)(t)),q(!1)}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return a.createElement(a.Fragment,null,a.createElement(p.Z,{onClose:function(){return r(!1)},persist:!1,size:"small",state:n},a.createElement(b,null)),a.createElement(p.Z,{onClose:function(){return B(!1)},persist:!1,size:"small",state:j},a.createElement(C.Z,{loginData:F,onComplete:V})),a.createElement(p.Z,{onClose:function(){},persist:!0,showCloseIcon:!1,size:"small",state:o},a.createElement(I.Z,{onComplete:V,token:null==F?void 0:F.token})),a.createElement("form",{id:"loginForm",method:"post",onSubmit:A(G)},a.createElement(m.Z,{alignItems:"center",className:"loginForm",display:"flex",flexDirection:"column",justifyContent:"center"},a.createElement(m.Z,{alignItems:"start",className:"inputBox",display:"flex",flexDirection:"column",justifyContent:"start"},a.createElement("label",{className:"customLabel"},a.createElement(x.Z,{id:"security.email"})),a.createElement(u.Z,{className:"customInput",error:!!H.email,fullWidth:!0,inputRef:O({required:L.formatMessage({id:"security.email.error.empty"}),pattern:{value:w.HN,message:L.formatMessage({id:"security.email.error.invalid"})}}),name:"email",type:"email",variant:"outlined"}),H.email&&a.createElement("span",{className:"errorText"},H.email.message)),a.createElement(m.Z,{alignItems:"start",className:"inputBox",display:"flex",flexDirection:"column",justifyContent:"start"},a.createElement(N.Z,{error:!!H.password,inputRef:O({required:L.formatMessage({id:"security.password.error.empty"})}),label:a.createElement(x.Z,{id:"security.password"}),name:"password"}),H.password&&a.createElement("span",{className:"errorText"},H.password.message)),a.createElement(m.Z,{className:"inputBox"},a.createElement(f.Z,{className:"full submitButton",form:"loginForm",loading:P,type:"submit"},a.createElement(x.Z,{id:"action.login"}))),a.createElement(m.Z,{alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center"},a.createElement("span",{className:"link",onClick:function(){return r(!0)}},a.createElement(x.Z,{id:"action.forgot"}))))),a.createElement(R.Z,null))},j=n(70607),B=n(49768),D=function(){var e=(0,s.Z)();return(0,B.Z)(),(0,k.Z)()?a.createElement(a.Fragment,null,a.createElement(l.q,null,a.createElement("title",null,e.formatMessage({id:"login.title"})+" | "+e.formatMessage({id:"product"}))),a.createElement(j.Z,null,a.createElement(r.Z,null,a.createElement(S,null)))):null}}}]);
//# sourceMappingURL=component---src-pages-login-index-js-1eef0428ba4cfa7484aa.js.map