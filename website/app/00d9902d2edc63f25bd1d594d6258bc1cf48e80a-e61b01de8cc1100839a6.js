"use strict";(self.webpackChunkzignaly_webapp=self.webpackChunkzignaly_webapp||[]).push([[6014],{164:function(e,t,n){var a=n(8580),o=n(1022);t.Z=void 0;var l=o(n(67294)),r=(0,a(n(66461)).default)(l.createElement("path",{d:"M21 18v1c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2V5c0-1.1.89-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2h9zm-9-2h10V8H12v8zm4-2.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}),"AccountBalanceWallet");t.Z=r},96919:function(e,t,n){var a=n(8580),o=n(1022);t.Z=void 0;var l=o(n(67294)),r=(0,a(n(66461)).default)(l.createElement("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-2 14l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"}),"AssignmentTurnedIn");t.Z=r},30596:function(e,t,n){var a=n(8580),o=n(1022);t.Z=void 0;var l=o(n(67294)),r=(0,a(n(66461)).default)(l.createElement("path",{d:"M19 6h-2c0-2.76-2.24-5-5-5S7 3.24 7 6H5c-1.1 0-1.99.9-1.99 2L3 20c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-7-3c1.66 0 3 1.34 3 3H9c0-1.66 1.34-3 3-3zm0 10c-2.76 0-5-2.24-5-5h2c0 1.66 1.34 3 3 3s3-1.34 3-3h2c0 2.76-2.24 5-5 5z"}),"LocalMall");t.Z=r},29714:function(e,t,n){var a=n(8580),o=n(1022);t.Z=void 0;var l=o(n(67294)),r=(0,a(n(66461)).default)(l.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.16-1.46-3.27-3.4h1.96c.1 1.05.82 1.87 2.65 1.87 1.96 0 2.4-.98 2.4-1.59 0-.83-.44-1.61-2.67-2.14-2.48-.6-4.18-1.62-4.18-3.67 0-1.72 1.39-2.84 3.11-3.21V4h2.67v1.95c1.86.45 2.79 1.86 2.85 3.39H14.3c-.05-1.11-.64-1.87-2.22-1.87-1.5 0-2.4.68-2.4 1.64 0 .84.65 1.39 2.67 1.91s4.18 1.39 4.18 3.91c-.01 1.83-1.38 2.83-3.12 3.16z"}),"MonetizationOn");t.Z=r},77666:function(e,t,n){var a=n(8580),o=n(1022);t.Z=void 0;var l=o(n(67294)),r=(0,a(n(66461)).default)(l.createElement("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}),"People");t.Z=r},40775:function(e,t,n){n.d(t,{Z:function(){return i}});var a=n(67294),o=n(82245),l=n(96693),r=n(80951),i=function(e){var t=e.checked,n=e.onChange;return a.createElement(o.Z,{alignItems:"center",className:"coinsFilter",display:"flex",flexDirection:"row"},a.createElement(l.Z,{checked:t,inputProps:{"aria-label":"Hide low value"},onChange:n}),a.createElement(r.Z,{id:"coins.filter.title"}))}},11267:function(e,t,n){n.d(t,{Z:function(){return I}});var a=n(67294),o=n(82245),l=n(38966),r=n(47752),i=n(49829),c=n(80951),s=n(13470),m=(n(17727),n(59761)),u=n(45850),f=n(19199),d=n(66718),p=n(60454),g=n(71949),v=n(66735),E=n(29093),Z=n(82825),h=n(55333),y=n(21842),x=function(e,t){var n=(0,a.useState)(e),o=n[0],l=n[1];return(0,a.useEffect)((function(){var n=setTimeout((function(){l(e)}),t);return function(){clearTimeout(n)}}),[e,t]),o},b=n(96284),C=function(e){var t=e.bases,n=e.base,l=e.balance,r=e.onClose,s=e.onRefreshCoins,C={availableBalance:parseFloat(l),balance:parseFloat(l)},I=(0,a.useState)(!1),S=I[0],T=I[1],w=(0,a.useState)([]),P=w[0],D=w[1],N=(0,Z.cI)({mode:"onChange"}),B=N.handleSubmit,j=N.control,z=N.errors,F=N.formState.isValid,M=N.setValue,k=N.watch,U=N.trigger,q=k("base",n),L=k("quote"),A=k("amount"),R=(0,a.useState)(!1),V=R[0],O=R[1],$=(0,a.useState)(null),H=$[0],K=$[1],Q=(0,m.Z)(),G=(0,f.I0)(),W=(0,v.Z)(),_=x(A,1500);(0,a.useEffect)((function(){u.Z.getQuoteAssetFromBase({base:q,internalExchangeId:Q.internalId}).then((function(e){D(e.sort((function(e,t){return e.localeCompare(t)}))),L&&!e.includes(L)?M("quote",""):X()&&J()})).catch((function(e){G((0,d.jx)(e))}))}),[q]);var J=function(){K(null),O(!0),u.Z.convertCoinPreview({from:q,to:L,qty:A}).then((function(e){K(e),setTimeout((function(){U("amount")}),0)})).catch((function(e){G((0,d.jx)(e))})).finally((function(){O(!1)}))},X=function(){return L&&q&&_};(0,a.useEffect)((function(){X()&&J()}),[_,L]);return a.createElement(o.Z,{alignItems:"center",display:"flex",flex:1,padding:4,flexDirection:"column"},a.createElement(p.Z,{align:"center",variant:"h3"},a.createElement(c.Z,{id:"convert.title"})),a.createElement("form",{onSubmit:B((function(){T(!0),u.Z.convertCoin({internalExchangeId:Q.internalId,from:q,to:L,qty:A}).then((function(){G((0,d.O7)("","convert.success")),s(),r()})).catch((function(e){G((0,d.jx)(e))})).finally((function(){T(!1)}))})),style:{width:"100%"}},a.createElement(o.Z,{mt:5,display:"flex",flexDirection:"column",alignItems:"center"},a.createElement(h.ur,null,a.createElement(Z.Qr,{control:j,defaultValue:n,name:"base",render:function(e){var n=e.onChange,o=e.value;return a.createElement(E.Z,{label:W.formatMessage({id:"transfer.internal.form.from"}),labelPlacement:"top",onChange:n,options:t,placeholder:W.formatMessage({id:"deposit.selectcoin"}),search:!0,value:o})}})),a.createElement(o.Z,{my:2,style:{width:"100%"}},a.createElement(h.ur,null,a.createElement(Z.Qr,{defaultValue:"",control:j,name:"quote",rules:{required:!0},render:function(e){var t=e.onChange,n=e.value;return a.createElement(E.Z,{label:W.formatMessage({id:"transfer.internal.form.to"}),labelPlacement:"top",options:P,placeholder:W.formatMessage({id:"deposit.selectcoin"}),search:!0,value:n,onChange:t})}}))),a.createElement(y.Z,{balance:C,setBalanceMax:function(){M("amount",l),U("amount")},errors:z,control:j,coin:n,minAmount:null==H?void 0:H.min,decimals:8}),a.createElement(o.Z,{display:"flex",alignItems:"center",height:"100px",justifyContent:"center"},V?a.createElement(g.Z,null):H&&parseFloat(A)>=H.min&&a.createElement(a.Fragment,null,a.createElement(p.Z,null,a.createElement(c.Z,{id:"convert.preview"})," ",a.createElement(b.Z,{value:H.estimatedAmount,displayType:"text",suffix:" "+L})))),a.createElement(o.Z,{mt:2},a.createElement(i.Z,{className:"submitButton",loading:S,type:"submit",disabled:!F||!H},a.createElement(c.Z,{id:"accounts.convert"}))))))},I=function(e){var t=e.title,n=e.persistKey,u=e.list,f=e.onRefreshCoins,d=(0,a.useState)(null),p=d[0],g=d[1],v=u.filter((function(e){return parseFloat(e.balanceFree)})).map((function(e){return e.coin})).sort((function(e,t){return e.localeCompare(t)})),E=(0,m.Z)(),Z=[{name:"coin",label:"col.coins.coin"},{name:"name",label:"col.coins.name"},{name:"balanceTotal",label:"col.coins.total",options:{customBodyRender:l.$1}},{name:"balanceFree",label:"col.coins.available",options:{customBodyRender:l.$1}},{name:"balanceLocked",label:"col.coins.locked",options:{customBodyRender:l.$1}},{name:"balanceTotalBTC",label:"col.coins.btcvalue",options:{customBodyRender:l.$1}},{name:"balanceTotalUSDT",label:"col.coins.usdtvalue",options:{customBodyRender:l.$1}}];"zignaly"===E.exchangeName.toLowerCase()&&"spot"===E.exchangeType&&f&&Z.push({name:"coin",label:"col.actions",options:{customBodyRender:function(e){var t,n=null===(t=u.find((function(t){return t.coin===e})))||void 0===t?void 0:t.balanceFree;return a.createElement(a.Fragment,null,a.createElement(i.Z,{className:"textPurple",onClick:function(){return g({coin:e,balance:n})},style:{padding:0,minWidth:"auto"},disabled:!parseFloat(n)},a.createElement(c.Z,{id:"accounts.convert"})))}}});return a.createElement(o.Z,{className:"coinsTable",display:"flex",flexDirection:"column",width:1},f&&p&&a.createElement(s.Z,{onClose:function(){g(null)},size:"small",state:!0},a.createElement(C,{bases:v,base:p.coin,balance:p.balance,onClose:function(){g(null)},onRefreshCoins:f})),a.createElement(r.Z,{columns:Z,data:u,options:{sortOrder:{name:"balanceTotalBTC",direction:"desc"}},persistKey:n,title:t}))}},79637:function(e,t,n){n.d(t,{mo:function(){return ee},HI:function(){return X},Xl:function(){return Y}});var a=n(67294),o=n(82245),l=n(71949),r=n(80951),i=n(4445),c=n(60454),s=n(77666),m=n(96919),u=n(29714),f=n(164),d=n(30596),p=function(e){var t=e.icon,n=e.title,l=e.quote,r=e.percentage,p=e.foot,g=e.value,v=e.tooltip,E=e.valueColor;return a.createElement(o.Z,{alignItems:"center",bgcolor:"grid.content",className:"managementSummaryCard",display:"flex",flexDirection:"column",justifyContent:"space-between"},a.createElement(o.Z,{alignItems:"center",className:"head",display:"flex",flexDirection:"row",justifyContent:"center"},"followers"===t&&a.createElement(s.Z,{className:"icon"}),"allocated"===t&&a.createElement(m.Z,{className:"icon"}),"balance"===t&&a.createElement(f.Z,{className:"icon"}),"profit"===t&&a.createElement(u.Z,{className:"icon"}),"float"===t&&a.createElement(d.Z,{className:"icon"}),v?a.createElement(i.ZP,{placement:"top",title:v},a.createElement(c.Z,{className:"headTitle",variant:"caption"},n)):a.createElement(c.Z,{className:"headTitle",variant:"caption"},n),r&&a.createElement(c.Z,{variant:"h4"},r)),a.createElement(o.Z,{alignItems:"flex-end",className:"body",display:"flex",flexDirection:"row",justifyContent:"center"},a.createElement(c.Z,{className:E||"",variant:"h1"},g),l&&a.createElement(c.Z,{variant:"caption"},l)),p&&a.createElement(o.Z,{alignItems:"center",className:"foot",display:"flex",flexDirection:"row",justifyContent:"center"},a.createElement(c.Z,{variant:"caption"},p)))},g=n(38966),v=(n(17727),n(45850)),E=n(19199),Z=n(66718),h=n(70899),y=n(11454),x=function(e){var t=(0,h._t)(null),n=(0,a.useState)(t),o=n[0],l=n[1],r=(0,a.useState)(!0),i=r[0],c=r[1],s=(0,E.I0)();return(0,y.Z)((function(){if(e){var t={providerId:e};v.Z.providerCopyTradingDataPointsGet(t).then((function(e){l(e)})).catch((function(e){s((0,Z.jx)(e))})).finally((function(){c(!1)}))}}),5e3,!0),{summaryLoading:i,summary:o}},b=function(e){var t=e.provider,n=x(t.id),i=n.summaryLoading,c=n.summary;return a.createElement(a.Fragment,null,i&&a.createElement(o.Z,{alignItems:"center",className:"loadingBox",display:"flex",flexDirection:"row",justifyContent:"center"},a.createElement(l.Z,{color:"primary",size:40})),!i&&a.createElement(o.Z,{alignItems:"center",className:"managementSummary",display:"flex",flexDirection:"row",justifyContent:"space-evenly"},a.createElement(p,{foot:" ",icon:"followers",title:a.createElement(r.Z,{id:"copyt.management.totalfollowers"}),value:t.followers}),a.createElement(p,{foot:"USDT: "+(0,g.C2)(c.totalAllocatedUSDTFromFollowers),icon:"allocated",quote:c.quote,title:a.createElement(r.Z,{id:"copyt.management.totalallocated"}),value:(0,g.C2)(c.totalAllocatedFromFollowers)}),a.createElement(p,{foot:"USDT "+(0,g.C2)(c.freeBalanceUSDT),icon:"balance",title:a.createElement(r.Z,{id:"copyt.management.freebalance"}),value:(0,g.C2)(c.freeBalancePercentage)+"%"}),a.createElement(p,{foot:"USDT "+(0,g.C2)(c.totalProfitUSDT),icon:"profit",percentage:(0,g.C2)(c.totalProfitPercentage)+"%",quote:c.quote,title:a.createElement(r.Z,{id:"copyt.management.totalprofit"}),value:(0,g.C2)(c.totalProfit),valueColor:c.totalProfitUSDT>0?"green":c.totalProfitUSDT<0?"red":""}),a.createElement(p,{foot:"USDT "+(0,g.C2)(c.floatUSDT),icon:"float",percentage:(0,g.C2)(c.floatPercentage)+"%",quote:c.quote,title:a.createElement(r.Z,{id:"copyt.management.float"}),value:(0,g.C2)(c.float)})))},C=n(66735),I=function(e){var t=(0,h.TY)(null),n=(0,a.useState)(t),o=n[0],l=n[1],r=(0,a.useState)(!0),i=r[0],c=r[1],s=(0,E.I0)();return(0,y.Z)((function(){if(e){var t={providerId:e};v.Z.providerBalanceGet(t).then((function(e){l(e)})).catch((function(e){s((0,Z.jx)(e))})).finally((function(){c(!1)}))}}),5e3,!0),{summaryLoading:i,summary:o}},S=function(e){var t=e.provider,n=I(t.id),i=n.summaryLoading,c=n.summary,s=(0,C.Z)();return a.createElement(a.Fragment,null,i&&a.createElement(o.Z,{alignItems:"center",className:"loadingBox",display:"flex",flexDirection:"row",justifyContent:"center"},a.createElement(l.Z,{color:"primary",size:40})),!i&&a.createElement(o.Z,{alignItems:"center",className:"managementSummary",display:"flex",flexDirection:"row",justifyContent:"space-evenly"},a.createElement(p,{foot:" ",icon:"followers",title:a.createElement(r.Z,{id:"copyt.management.totalfollowers"}),tooltip:s.formatMessage({id:"copyt.management.totalfollowers.tooltip"}),value:t.followers}),a.createElement(p,{foot:"BTC: "+(0,g.$1)(c.totalWalletBTC),icon:"allocated",quote:"USDT",title:a.createElement(r.Z,{id:"copyt.management.wallet"}),tooltip:s.formatMessage({id:"copyt.management.wallet.tooltip"}),value:(0,g.C2)(c.totalWalletUSDT)}),a.createElement(p,{foot:"BTC "+(0,g.$1)(c.totalUnrealizedProfitBTC),icon:"profit",quote:"USDT",title:a.createElement(r.Z,{id:"copyt.management.profit"}),value:""+(0,g.C2)(c.totalUnrealizedProfitUSDT),valueColor:c.totalUnrealizedProfitBTC>0?"green":c.totalUnrealizedProfitBTC<0?"red":""}),a.createElement(p,{foot:"BTC "+(0,g.$1)(c.totalMarginBTC),icon:"balance",quote:"USDT",title:a.createElement(r.Z,{id:"copyt.management.margin"}),tooltip:s.formatMessage({id:"copyt.management.margin.tooltip"}),value:(0,g.C2)(c.totalMarginUSDT)}),a.createElement(p,{foot:"USDT "+(0,g.$1)(c.totalMarginUSDT-c.totalCurrentMarginUSDT),icon:"balance",quote:"%",title:a.createElement(r.Z,{id:"copyt.management.available"}),tooltip:s.formatMessage({id:"copyt.management.available.tooltip"}),value:(0,g.C2)(c.abstractPercentage)})))},T=function(e){var t=e.provider,n=e.summary,l=(0,C.Z)();return a.createElement(o.Z,{alignItems:"center",className:"managementSummary",display:"flex",flexDirection:"row",justifyContent:"space-evenly"},a.createElement(p,{foot:" ",icon:"followers",title:a.createElement(r.Z,{id:"copyt.management.totalfollowers"}),tooltip:l.formatMessage({id:"copyt.management.totalfollowers.tooltip"}),value:t.followers}),a.createElement(p,{foot:" ",icon:"allocated",quote:t.copyTradingQuote,title:a.createElement(r.Z,{id:"copyt.management.wallet"}),tooltip:l.formatMessage({id:"copyt.management.wallet.tooltip"}),value:(0,g.C2)(n.totalWallet)}),a.createElement(p,{foot:" ",icon:"profit",quote:t.copyTradingQuote,title:a.createElement(r.Z,{id:"copyt.management.profit"}),value:""+(0,g.C2)(n.totalPnl),valueColor:n.totalPnl>0?"green":n.totalPnl<0?"red":""}),a.createElement(p,{foot:" ",icon:"balance",quote:t.copyTradingQuote,title:a.createElement(r.Z,{id:"copyt.management.invested"}),tooltip:l.formatMessage({id:"copyt.management.invested.tooltip"}),value:(0,g.C2)(n.totalInvested)}),a.createElement(p,{foot:t.copyTradingQuote+" "+(0,g.$1)(n.totalFree*n.abstractPercentage/100),icon:"balance",quote:"%",title:a.createElement(r.Z,{id:"copyt.management.available"}),tooltip:l.formatMessage({id:"copyt.management.available.tooltip"}),value:(0,g.C2)(n.abstractPercentage)}))},w=n(41683),P=n(2360),D=n(59761),N=function(e){var t=e.provider,n=(0,a.useState)(!1),r=n[0],i=n[1],c=(0,D.Z)(),s=(0,a.useState)([]),m=s[0],u=s[1],f=(0,E.I0)(),d=function(){i(!0);var e={exchangeInternalId:c.internalId,providerId:t.id};v.Z.providerOrdersGet(e).then((function(e){u(e)})).catch((function(e){f((0,Z.jx)(e))})).finally((function(){i(!1)}))};return(0,a.useEffect)(d,[]),a.createElement(a.Fragment,null,r&&a.createElement(o.Z,{alignItems:"center",className:"loadingBox",display:"flex",flexDirection:"row",justifyContent:"center"},a.createElement(l.Z,{color:"primary",size:40})),!r&&a.createElement(o.Z,{alignItems:"flex-start",className:"orders",display:"flex",flexDirection:"column",justifyContent:"flex-start"},a.createElement(P.Z,{list:m,loadData:d,persistKey:"providerOrders",provider:t,selectedAccount:c,title:""})))},B=n(25280),j=function(e){var t=e.provider,n=(0,a.useState)(!1),r=n[0],i=n[1],c=(0,D.Z)(),s=(0,a.useState)([]),m=s[0],u=s[1],f=(0,E.I0)(),d=function(){i(!0);var e={exchangeInternalId:c.internalId,providerId:t.id};v.Z.providerContractsGet(e).then((function(e){u(e)})).catch((function(e){f((0,Z.jx)(e))})).finally((function(){i(!1)}))};return(0,a.useEffect)(d,[]),a.createElement(a.Fragment,null,r&&a.createElement(o.Z,{alignItems:"center",className:"loadingBox",display:"flex",flexDirection:"row",justifyContent:"center"},a.createElement(l.Z,{color:"primary",size:40})),!r&&a.createElement(o.Z,{alignItems:"flex-start",className:"orders",display:"flex",flexDirection:"column",justifyContent:"flex-start"},a.createElement(B.Z,{list:m,loadData:d,persistKey:"providerContracts",provider:t,selectedAccount:c,title:""})))},z=n(53168),F=n(47752),M=n(606),k=n(23871),U=n(33547),q=n(96693),L=n(44292),A=n(83089),R=function(e){var t=e.values,n=e.persistKey,o=e.confirmAction,r=e.index,i=e.onSelectionChange,c=e.selectedRows,s=e.onAllSelection,m=(0,a.useState)([]),u=m[0],f=m[1],d=(0,a.useState)(!1),p=d[0],g=d[1],v=(0,L.Z)();(0,a.useEffect)((function(){if(t.length){for(var e=t[r]?t[r].subPositions:[],n=[],a=(0,A.LT)(e,o),l=a.data,i=a.columns,c=0;c<e.length;c++){for(var s=[],m=0;m<i.length;m++){var u={id:"",data:""};u.id=i[m].name,u.data=l[c][m],s.push(u)}n[c]=s}f([].concat(n))}}),[t]);(0,a.useEffect)((function(){if(c.length){var e=!0;(t[r]?t[r].subPositions:[]).forEach((function(t){c.includes(t.positionId)||(e=!1)})),g(!!e)}}),[c]);var E=function(e){var t=e.find((function(e){return"positionId"===e.id}));return!!c.includes(t.data.toString())};return a.createElement(a.Fragment,null,u.map((function(e,o){return a.createElement(k.Z,{className:"expandedRows",key:o},0===o&&(u=t[r]?t[r].subPositions:[],f=u.filter((function(e){return e.updating})),u.length!==f.length)?a.createElement(U.Z,{className:"checkboxCell"},a.createElement(q.Z,{checked:p,className:"checkbox",onChange:function(e){return function(e){g(e.target.checked),s(r,e.target.checked)}(e)}})):a.createElement(U.Z,null," "),(c=e.find((function(e){return"positionId"===e.id})),(m=(t[r]?t[r].subPositions:[]).find((function(e){return e.positionId===c.data.toString()})))&&m.updating?a.createElement(U.Z,{className:"checkboxCell"},a.createElement(l.Z,{color:"primary",size:30})):a.createElement(U.Z,{className:"checkboxCell"},a.createElement(q.Z,{checked:E(e),className:"checkbox",onChange:function(t){return function(e,t){var n=t.find((function(e){return"positionId"===e.id}));i(r,n.data)}(0,e)}}))),e.map((function(e,t){return"subPositions"!==e.id&&v.displayColumns[n].includes(e.id)&&a.createElement(U.Z,{key:t}," ",e.data," ")})));var c,m,u,f})))},V=n(9870),O=n(49829),$=function(e){var t=e.selectedRows,n=e.setSelectedRows,l=e.setLoading,i=e.values,c=(0,D.Z)(),s=(0,E.I0)(),m=function(){var e=[];return i.forEach((function(t){var n=t.subPositions;e=[].concat((0,z.Z)(e),(0,z.Z)(n))})),e.filter((function(e){return t.includes(e.positionId)}))},u=function(e){l(!0);var t=[],a=m();"abort"===e&&a.forEach((function(e){if(1===e.status){var n={positionId:e.positionId},a=v.Z.positionCancel(n);t.push(a)}})),"exit"===e&&a.forEach((function(e){if(1!==e.status){var n={positionId:e.positionId,internalExchangeId:c.internalId},a=v.Z.positionExit(n);t.push(a)}})),Promise.all(t).then((function(){"abort"===e&&s((0,Z.O7)("alert.management.cancelall.title","alert.management.cancelall.body")),"exit"===e&&s((0,Z.O7)("alert.management.exitall.title","alert.management.exitall.body")),n([])})).catch((function(e){s((0,Z.jx)(e))}))};return a.createElement(o.Z,{alignItems:"center",className:"selectionActions",display:"flex",flexDirection:"row",justifyContent:"flex-start"},a.createElement(O.Z,{className:"textPurple",disabled:function(){if(t.length){var e=m(),n=!1;return e.every((function(e){return 1!==e.status||(n=!0,!1)})),!n}return!0}(),onClick:function(){return u("abort")}},a.createElement(r.Z,{id:"copyt.management.cancel"})),a.createElement(O.Z,{className:"textPurple",disabled:function(){if(t.length){var e=m(),n=!1;return e.every((function(e){return 1===e.status||(n=!0,!1)})),!n}return!0}(),onClick:function(){return u("exit")}},a.createElement(r.Z,{id:"copyt.management.exit"})))},H=function(e){var t,n=e.list,l=e.allPositions,r=e.setLoading,i=e.provider,c="managementPositions",s=(0,E.I0)(),m=(0,a.useState)([]),u=m[0],f=m[1],d=(0,a.useState)([]),p=d[0],g=d[1],h=(0,D.Z)(),y=(0,a.useState)({titleTranslationId:"",messageTranslationId:"",visible:!1}),x=y[0],b=y[1],C=(0,a.useState)({positionId:"",action:""}),I=C[0],S=C[1],T=function(e){var t=e.currentTarget,n=t.getAttribute("data-position-id"),a=t.getAttribute("data-action");S({action:a||"",positionId:n||""}),"abort"===a&&b({titleTranslationId:"confirm.positioncancel.title",messageTranslationId:"confirm.positioncancel.message",visible:!0}),"exit"===a&&b({titleTranslationId:"confirm.positionexit.title",messageTranslationId:"confirm.positionexit.message",visible:!0})},w=(0,V.J)(n,T),P=w.composeManagementPositionsDataTable,N=w.excludeDataTableColumn,B=(t=P(),i.profitSharing&&(t=N(t,"col.provider.subpositions"),t=N(t,"col.provider.totalpositions"),t=N(t,"col.provider.soldpositions")),t),j=B.columns,k=B.data,U=function(e,t){var n=l[e].subPositions.find((function(e){return e.positionId===t})),a=(0,z.Z)(p);a.includes(t)?a=a.filter((function(e){return e!==t})):n&&!n.updating&&a.push(t),g(a)},q=function(e,t){var n=l[e].subPositions;if(t){var a=(0,z.Z)(p);n.forEach((function(e){e.updating||a.push(e.positionId)})),a=(0,z.Z)(new Set(a)),g(a)}else{var o=(0,z.Z)(p);n.forEach((function(e){o=o.filter((function(t){return t!==e.positionId}))})),g(o)}},L={expandableRows:!i.profitSharing,renderExpandableRow:function(e,t){return a.createElement(R,{confirmAction:T,index:t.dataIndex,onAllSelection:q,onSelectionChange:U,persistKey:c,selectedRows:p,values:l})},rowsExpanded:u,onRowExpansionChange:function(e,t){var n=[];t.forEach((function(e){n.push(e.dataIndex)})),f(n)},expandableRowsHeader:!1,sortOrder:{name:"col.date.open",direction:"desc"}};return a.createElement(a.Fragment,null,a.createElement(M.Q,{confirmConfig:x,executeActionCallback:function(){var e=I.positionId,t=I.action;"abort"===t&&v.Z.positionCancel({positionId:e}).then((function(e){s((0,Z.O7)("Position cancelled","Position "+e.positionId+" was cancelled."))})).catch((function(e){s((0,Z.jx)(e))})),"exit"===t&&v.Z.positionExit({positionId:e,internalExchangeId:h.internalId}).then((function(e){s((0,Z.O7)("Position exited","Position "+e.positionId+" was exited."))})).catch((function(e){s((0,Z.jx)(e))}))},setConfirmConfig:b}),a.createElement(o.Z,{className:"managementTable",display:"flex",flexDirection:"column",width:1},a.createElement(F.Z,{columns:j,data:k,options:L,persistKey:c,title:i.profitSharing?"":a.createElement($,{selectedRows:p,setLoading:r,setSelectedRows:g,values:l})})))},K=function(e){var t=e.provider,n=(0,a.useState)([]),r=n[0],i=n[1],c=(0,a.useState)([]),s=c[0],m=c[1],u=(0,a.useState)(!0),f=u[0],d=u[1],p=(0,E.I0)();(0,y.Z)((function(){if(t.id){var e={providerId:t.id};v.Z.providerManagementPositions(e).then((function(e){d(!1),m(e),i(g(e))})).catch((function(e){p((0,Z.jx)(e))}))}}),5e3,!0);var g=function(e){var t=[];return e.forEach((function(e){t.push(e.position)})),t};return a.createElement(a.Fragment,null,f&&a.createElement(o.Z,{alignItems:"center",className:"loadingBox",display:"flex",flexDirection:"row",justifyContent:"center"},a.createElement(l.Z,{color:"primary",size:40})),!f&&a.createElement(H,{allPositions:s,list:r,provider:t,setLoading:d}))},Q=n(11267),G=n(40775),W=function(e,t){var n=(0,a.useState)({}),o=n[0],l=n[1],r=(0,E.I0)();return(0,a.useEffect)((function(){if(e&&t){var n={exchangeInternalId:e,providerId:t};v.Z.providerAssetsGet(n).then((function(e){l(e)})).catch((function(e){r((0,Z.jx)(e))}))}}),[e,t]),o},_=function(e){var t=e.provider,n=e.selectedExchange,r=(0,a.useState)(null),i=r[0],c=r[1],s=W(n.internalId,t.id),m=s?Object.values(s):null,u=(0,a.useState)(!1),f=u[0],d=u[1];(0,a.useEffect)((function(){s&&p(f)}),[s]);var p=function(e){m&&c(e?m.filter((function(e){return parseFloat(e.balanceTotalUSDT)>1})):m)},g=a.createElement(G.Z,{checked:f,onChange:function(e){d(e.target.checked),p(e.target.checked)}});return a.createElement(a.Fragment,null,i?a.createElement(o.Z,{alignItems:"flex-start",className:"providerCoins",display:"flex",flexDirection:"column",justifyContent:"flex-start"},a.createElement(Q.Z,{list:i,persistKey:"exchangeAssets",title:g})):a.createElement(o.Z,{alignItems:"center",className:"loadingBox",display:"flex",flexDirection:"row",justifyContent:"center"},a.createElement(l.Z,{color:"primary",size:40})))},J=function(e){var t=e.provider,n=e.selectedExchange,l=e.tablePositions,i=e.allPositions,c=e.loadData,s=(0,a.useState)(0),m=s[0],u=s[1],f=[{display:!0,label:a.createElement(r.Z,{id:"management.positions"})},{display:t.profitSharing,label:a.createElement(r.Z,{id:"management.orders"})},{display:t.profitSharing&&"futures"===t.exchangeType.toLowerCase(),label:a.createElement(r.Z,{id:"management.contracts"})},{display:t.profitSharing&&"spot"===t.exchangeType.toLowerCase(),label:a.createElement(r.Z,{id:"management.coins"})}];return a.createElement(o.Z,{bgcolor:"grid.content",className:"managementTabs"},a.createElement(o.Z,{alignItems:"flex-start",className:"tabsBox",display:"flex",flexDirection:"column",justifyContent:"flex-start"},a.createElement(w.Z,{changeTab:function(e,t){u(t)},tabValue:m,tabs:f}),0===m&&a.createElement(o.Z,{className:"tabPanel"},t.profitSharing&&"spot"===t.exchangeType.toLowerCase()?a.createElement(H,{allPositions:i,list:l,provider:t,setLoading:c}):a.createElement(K,{provider:t})),1===m&&a.createElement(o.Z,{className:"tabPanel"},a.createElement(N,{provider:t})),2===m&&a.createElement(o.Z,{className:"tabPanel"},"futures"===t.exchangeType.toLowerCase()&&a.createElement(j,{provider:t}),"spot"===t.exchangeType.toLowerCase()&&a.createElement(_,{provider:t,selectedExchange:n}))))},X=function(e){var t=e.provider,n=e.selectedExchange,r=(0,a.useState)([]),i=r[0],c=r[1],s=(0,a.useState)(null),m=s[0],u=s[1],f=(0,a.useState)(!0),d=f[0],p=f[1],g=(0,E.I0)();(0,y.Z)((function(){if(t.id){var e={providerId:t.id};v.Z.providerManagementBalanceAndPositions(e).then((function(e){p(!1),u(e),c(h(e.positions))})).catch((function(e){g((0,Z.jx)(e))}))}}),5e3,!0);var h=function(e){var t=[];return e.forEach((function(e){t.push(e.position)})),t};return a.createElement(a.Fragment,null,(d||!m)&&a.createElement(o.Z,{alignItems:"center",className:"loadingBox",display:"flex",flexDirection:"row",justifyContent:"center"},a.createElement(l.Z,{color:"primary",size:35})),!d&&m&&a.createElement(a.Fragment,null,a.createElement(o.Z,{className:"summaryBox"},a.createElement(T,{provider:t,summary:m.balance})),a.createElement(o.Z,{className:"tableBoxBox"},a.createElement(J,{allPositions:m.positions,loadData:function(){return p(!0)},provider:t,selectedExchange:n,tablePositions:i}))))},Y=function(e){var t=e.provider,n=e.selectedExchange;return a.createElement(a.Fragment,null,a.createElement(o.Z,{className:"summaryBox"},a.createElement(b,{provider:t})),a.createElement(o.Z,{className:"tableBoxBox"},a.createElement(J,{provider:t,selectedExchange:n})))},ee=function(e){var t=e.provider,n=e.selectedExchange;return a.createElement(a.Fragment,null,a.createElement(o.Z,{className:"summaryBox"},a.createElement(S,{provider:t})),a.createElement(o.Z,{className:"tableBoxBox"},a.createElement(J,{provider:t,selectedExchange:n})))}}}]);
//# sourceMappingURL=00d9902d2edc63f25bd1d594d6258bc1cf48e80a-e61b01de8cc1100839a6.js.map