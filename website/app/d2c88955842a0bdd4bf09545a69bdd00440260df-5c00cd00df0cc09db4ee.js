"use strict";(self.webpackChunkzignaly_webapp=self.webpackChunkzignaly_webapp||[]).push([[6932],{73225:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var a=n(67294),l=n(82245),r=n(71949),i=n(59761),s=n(25450),o=n(28583),c=n.n(o),m=(n(17727),n(60454)),u=n(8474),p=n(82825),g=n(19199),f=n(66718),d=n(80951),E=n(48110),h=n(4445),v=n(54612),x=n(35785),Z=n(71673),y=n(44292),b=function(e){var t=e.formMethods,n=e.value,r=e.label,i=e.name,s=e.tooltip,o=e.unit,c=(0,y.Z)(),u=(0,a.useState)(!!n),p=u[0],g=u[1],f=(0,a.useState)(n||""),b=f[0],I=f[1],N=t.register;(0,a.useEffect)((function(){g(!!n)}),[n]);return a.createElement(l.Z,{alignItems:"flex-start",className:"toggleInput",display:"flex",flexDirection:"row",justifyContent:"space-between"},a.createElement(l.Z,{alignItems:"center",className:"labelBox",display:"flex",flexDirection:"row",justifyContent:"space-between"},a.createElement("label",{className:"customLabel"},a.createElement(d.Z,{id:r})),a.createElement(h.ZP,{placement:"top",title:a.createElement(m.Z,{variant:"h5"},a.createElement(d.Z,{id:s}))},a.createElement(Z.default,{className:"icon"})),a.createElement(v.Z,{checked:p,onChange:function(e){return g(e.target.checked)}})),p&&a.createElement(l.Z,{className:"fieldInputBox",display:"flex",flexDirection:"row"},a.createElement(E.Z,{InputProps:{endAdornment:a.createElement(x.Z,{position:"end"},o)},className:"customInput "+(c.darkStyle?" dark ":" light "),fullWidth:!0,inputRef:N,name:i,onChange:function(e){var t=e.target.value;"stopLoss"===i?(t.match(/^[0-9]\d*(?:[.,]\d{0,8})?$/)||""===t||t.includes("-"))&&(t=t.replace(",","."),I(1===Math.sign(t)?-1*t:t)):"maxPositions"===i||"positionsPerMarket"===i||"leverage"===i?(t.match(/^\d+$/)||""===t)&&I(t):(t.match(/^[0-9]\d*(?:[.,]\d{0,8})?$/)||""===t||t.includes("-"))&&(t=t.replace(",","."),I(t))},type:"text",value:b,variant:"outlined"})))},I=function(e){var t=e.value1,n=e.value2,r=e.formMethods,i=e.label,s=e.name1,o=e.name2,c=e.tooltip,u=e.unitLeft1,p=e.unitLeft2,g=e.unitRight1,f=e.unitRight2,b=(0,y.Z)(),I=(0,a.useState)(!(!t&&!n)),N=I[0],w=I[1],k=(0,a.useState)(t||""),C=k[0],T=k[1],S=(0,a.useState)(n||""),P=S[0],B=S[1],D=r.register;(0,a.useEffect)((function(){w(!(!t&&!n))}),[t,n]);return a.createElement(l.Z,{alignItems:"flex-start",className:"toggleDoubleInput",display:"flex",flexDirection:"row",justifyContent:"space-between"},a.createElement(l.Z,{alignItems:"center",className:"labelBox",display:"flex",flexDirection:"row",justifyContent:"space-between"},a.createElement("label",{className:"customLabel"},a.createElement(d.Z,{id:i})),a.createElement(h.ZP,{placement:"top",title:a.createElement(m.Z,{variant:"h5"},a.createElement(d.Z,{id:c}))},a.createElement(Z.default,{className:"icon"})),a.createElement(v.Z,{checked:N,onChange:function(e){return w(e.target.checked)}})),N&&a.createElement(l.Z,{className:"multiInputBox",display:"flex",flexDirection:"column"},a.createElement(E.Z,{InputProps:{startAdornment:a.createElement(x.Z,{position:"start"},u),endAdornment:a.createElement(x.Z,{position:"end"},g)},className:"customInput "+(b.darkStyle?" dark ":" light "),fullWidth:!0,inputRef:D({max:100}),name:s,onChange:function(e){var t=e.target.value;(t.match(/^[0-9]\d*(?:[.,]\d{0,8})?$/)||""===t||t.includes("-"))&&(t=t.replace(",","."),T(-1===Math.sign(t)?-1*t:t))},type:"text",value:C,variant:"outlined"}),a.createElement(E.Z,{InputProps:{startAdornment:a.createElement(x.Z,{position:"start"},p),endAdornment:a.createElement(x.Z,{position:"end"},f)},className:"customInput "+(b.darkStyle?" dark ":" light "),fullWidth:!0,inputRef:D({max:100}),name:o,onChange:function(e){var t=e.target.value;(t.match(/^[0-9]\d*(?:[.,]\d{0,8})?$/)||""===t||t.includes("-"))&&(t=t.replace(",","."),B(1===Math.sign(t)?-1*t:t))},type:"text",value:P,variant:"outlined"})))},N=n(68961),w=n(4972),k=function(e){var t=e.value1,n=e.value2,r=e.formMethods,i=e.label,s=e.name1,o=e.name2,c=e.tooltip,u=(0,y.Z)(),g=(0,a.useState)(t?t.toString().replace(",","."):""),f=g[0],d=g[1],v=r.control,x=r.register;return a.createElement(l.Z,{alignItems:"center",className:"selectInputBox",display:"flex",flexDirection:"row"},a.createElement(l.Z,{alignItems:"center",className:"labelBox",display:"flex",flexDirection:"row",justifyContent:"space-between"},a.createElement("label",{className:"customLabel"},i),a.createElement(h.ZP,{placement:"top",title:a.createElement(m.Z,{variant:"h5"},c)},a.createElement(Z.default,{className:"icon"}))),a.createElement(l.Z,{className:"fieldInputBox",display:"flex",flexDirection:"row"},a.createElement(E.Z,{className:"customInput "+(u.darkStyle?" dark ":" light "),fullWidth:!0,inputRef:x,name:s,onChange:function(e){var t=e.target.value;(t.match(/^[0-9]\d*(?:[.,]\d{0,8})?$/)||""===t)&&(t=t.replace(",","."),d(t))},type:"text",value:f,variant:"outlined"}),a.createElement(p.Qr,{as:a.createElement(N.Z,{className:"selectInput",variant:"outlined"},a.createElement(w.Z,{value:"#"},"#"),a.createElement(w.Z,{value:"%"},"%")),control:v,defaultValue:n,name:o})))},C=n(53168),T=n(84662),S=n(59511),P=function(e){var t=e.onChange,n=e.defaultValue,r=e.type,i={targetId:1,amountPercentage:"",priceTargetPercentage:"",amountError:0,priceError:!1,delete:!0},s=(0,a.useState)([i]),o=s[0],c=s[1];(0,a.useEffect)((function(){if(n&&n.length){for(var e=1,t=0;t<n.length;t++)n[t].targetId=e,n[t].delete=!0,n[t].priceTargetPercentage=n[t].priceTargetPercentage?n[t].priceTargetPercentage:"",n[t].amountPercentage=n[t].amountPercentage?n[t].amountPercentage:"",e++;n[0].delete=!1,c(n)}}),[n]);var m=function(){t(o)},u=function(e,t){var n=e.target.value,a=(0,C.Z)(o),l=(a=p(a)).findIndex((function(e){return e.targetId===t})),i=a.find((function(e){return e.targetId===t}));if(n.match(/^[0-9]\d*(?:[.,]\d{0,8})?$/)||""===n||n.includes("-"))if(n=n.replace(",","."),"amount"===e.target.name){if(i.amountPercentage=-1===Math.sign(n)?-1*n:n,"takeprofit"===r){var s=0;a.forEach((function(e){e.targetId!==i.targetId&&(s+=parseFloat(e.amountPercentage))})),s+parseFloat(i.amountPercentage)>100?i.amountError=100-s:i.amountError=0}}else i.priceTargetPercentage="dca"===r?1===Math.sign(n)?-1*n:n:-1===Math.sign(n)?-1*n:n;a[l]=i,c(a)},p=function(e){return e.forEach((function(e){e.amountError=0})),e};return a.createElement(l.Z,{className:"targetFields"},o.map((function(e,t){return a.createElement(l.Z,{alignItems:"center",className:"fieldBox",display:"flex",flexDirection:"column",justifyContent:"space-between",key:t},a.createElement(E.Z,{InputProps:{startAdornment:a.createElement(x.Z,{position:"start"},"Price Target"),endAdornment:a.createElement(x.Z,{position:"end"},"%")},className:"customInput",name:"price",onBlur:m,onChange:function(t){return u(t,e.targetId)},type:"text",value:e.priceTargetPercentage,variant:"outlined"}),a.createElement(E.Z,{InputProps:{startAdornment:a.createElement(x.Z,{position:"start"},"Qty"),endAdornment:a.createElement(x.Z,{position:"end"},"%")},className:"customInput",name:"amount",onChange:function(t){return u(t,e.targetId)},type:"text",value:e.amountPercentage,variant:"outlined"}),!!e.amountError&&a.createElement("span",{className:"errorText"},"Amount cannot be greater than "+e.amountError))})),a.createElement(T.Z,{className:"icon add",onClick:function(){var e=Object.assign({},i),t=(0,C.Z)(o);e.targetId=t.length?t[t.length-1].targetId+1:0,t.push(e),c(t)}}),a.createElement(S.Z,{className:"icon delete",onClick:function(){var e=(0,C.Z)(o);e.splice(e.length-1,1),c(e),t(e)}}))},B=function(e){var t=e.value,n=e.label,r=e.onChange,i=e.type,s=(0,a.useState)(!(!t||!t.length)),o=s[0],c=s[1],m=(0,a.useState)(t),u=m[0],p=m[1];(0,a.useEffect)((function(){c(!(!t||!t.length)),p(t)}),[t]);return(0,a.useEffect)((function(){o||(r([]),p([]))}),[o]),a.createElement(l.Z,{alignItems:"flex-start",className:"toggleTargetFields",display:"flex",flexDirection:"row",justifyContent:"space-between"},a.createElement(l.Z,{alignItems:"center",className:"labelBox",display:"flex",flexDirection:"row",justifyContent:"space-between"},a.createElement("label",{className:"customLabel"},a.createElement(d.Z,{id:n})),a.createElement(v.Z,{checked:o,onChange:function(e){return c(e.target.checked)}})),o&&a.createElement(P,{defaultValue:u,onChange:r,type:i}))},D=n(70899),M=n(45850),L=function(e){var t=e.value,n=e.formMethods,r=e.label,i=e.name,s=e.tooltip,o=(0,y.Z)(),c=(0,a.useState)(!!t),u=c[0],g=c[1],f=n.control;return(0,a.useEffect)((function(){g(!!t)}),[t]),a.createElement(l.Z,{alignItems:"flex-start",className:"toggleTextarea",display:"flex",flexDirection:"row",justifyContent:"space-between"},a.createElement(l.Z,{alignItems:"center",className:"labelBox",display:"flex",flexDirection:"row",justifyContent:"space-between"},a.createElement("label",{className:"customLabel"},a.createElement(d.Z,{id:r})),a.createElement(h.ZP,{placement:"top",title:a.createElement(m.Z,{variant:"h5"},a.createElement(d.Z,{id:s}))},a.createElement(Z.default,{className:"icon"})),a.createElement(v.Z,{checked:u,onChange:function(e){return g(e.target.checked)}})),u&&a.createElement(l.Z,{className:"fieldInputBox",display:"flex",flexDirection:"row"},a.createElement(p.Qr,{as:a.createElement(E.Z,{className:"customTextarea "+(o.darkStyle?" dark ":" light "),fullWidth:!0,multiline:!0,rows:5,variant:"outlined"}),control:f,defaultValue:t||"",name:i})))},j=n(27660),A=n(18415),R=n(87022),V=n(45685),z=n(54569),W=function(e){var t=e.formMethods,n=e.value,r=e.label,i=e.name,s=e.tooltip,o=e.options,c=(0,a.useState)(!!n),u=c[0],p=c[1],g=t.register;return(0,a.useEffect)((function(){p(!!n)}),[n]),a.createElement(l.Z,{alignItems:"flex-start",className:"toggleInput",display:"flex",flexDirection:"row",justifyContent:"space-between"},a.createElement(l.Z,{alignItems:"center",className:"labelBox",display:"flex",flexDirection:"row",justifyContent:"space-between"},a.createElement("label",{className:"customLabel"},a.createElement(d.Z,{id:r})),a.createElement(h.ZP,{placement:"top",title:a.createElement(m.Z,{variant:"h5"},a.createElement(d.Z,{id:s}))},a.createElement(Z.default,{className:"icon"})),a.createElement(v.Z,{checked:u,onChange:function(e){return p(e.target.checked)}})),u&&a.createElement(l.Z,{className:"fieldInputBox",display:"flex",flexDirection:"row"},a.createElement(R.Z,{className:"radioBox",defaultValue:n},o&&o.map((function(e,t){return a.createElement(V.Z,{control:a.createElement(z.Z,null),inputRef:g,key:t,label:e.label,name:i,value:e.value})})))))},q=function(e){var t=e.settings,n=e.quotes,r=e.onUpdate,o=(0,s.Z)(),E=(0,i.Z)(),h=(0,a.useState)(!1),v=h[0],x=h[1],Z=(0,a.useState)([]),y=Z[0],N=Z[1],w=(0,a.useState)([]),C=w[0],T=w[1],S=(0,p.cI)(),P=S.handleSubmit,R=(0,g.I0)(),V=(0,D.BW)(),z=(0,a.useContext)(j.Z).setHasAllocated;(0,a.useEffect)((function(){N(t.takeProfitTargets),T(t.reBuyTargets)}),[t]);var q=function(e,t){return 1===t?"positionSize"+e+"Value":2===t?"positionSize"+e+"Unit":"positionSize"+e},F=function(e){x(!0);var t=c()(V,e,{takeProfitTargets:$(),reBuyTargets:O(),providerId:o.provider.id,internalExchangeId:E.internalId,exchangeId:E.id,version:2,buyTTL:!!e.buyTTL&&60*e.buyTTL,sellByTTL:!!e.sellByTTL&&3600*e.sellByTTL});M.Z.providerExchangeSettingsUpdate(t).then((function(e){(0,A.m)(n,e,z),r(),R((0,f.O7)("","srv.settings.update.alert"))})).catch((function(e){R((0,f.jx)(e))})).finally((function(){x(!1)}))},$=function(){return!!y.length&&(y.forEach((function(e){delete e.amountError,delete e.priceError})),y)},O=function(){return!!C.length&&C};return a.createElement(l.Z,{bgcolor:"grid.content",className:"settingsFormWrapper",flexWrap:"wrap"},a.createElement("form",{autoComplete:"off",onSubmit:P(F)},a.createElement(l.Z,{className:"formBox",display:"flex",flexDirection:"row"},a.createElement(l.Z,{alignItems:"flex-start",className:"amountsFormBox",display:"flex",flexDirection:"column",justifyContent:"flex-start"},a.createElement(m.Z,{variant:"h3"},a.createElement(d.Z,{id:"srv.settings.amounts"})),n&&Object.keys(n).map((function(e,l){return a.createElement(k,{formMethods:S,key:l,label:a.createElement(d.Z,{id:"signalp.settings.amounts",values:{quote:e}}),name1:q(e,1),name2:q(e,2),tooltip:a.createElement(d.Z,{id:"signalp.settings.amounts.help",values:{quote:e,notional:n[e].minNotional}}),value1:t[q(e,1)],value2:t[q(e,2)]?t[q(e,2)]:"#"})}))),a.createElement(l.Z,{alignItems:"flex-start",className:"strategyFormBox",display:"flex",flexDirection:"column",justifyContent:"flex-start"},a.createElement(m.Z,{variant:"h3"},a.createElement(d.Z,{id:"srv.settings.strategy"})),a.createElement(b,{formMethods:S,label:"signalp.settings.pricedeviation.entry",name:"priceDeviation",tooltip:"signalp.settings.pricedeviation.entry.help",unit:"%",value:t.priceDeviation}),a.createElement(b,{formMethods:S,label:"signalp.settings.pricedeviation.exit",name:"sellPriceDeviation",tooltip:"signalp.settings.pricedeviation.exit.help",unit:"%",value:t.sellPriceDeviation}),a.createElement(b,{formMethods:S,label:"signalp.settings.entryexpiration",name:"buyTTL",tooltip:"signalp.settings.entryexpiration.help",unit:"Min",value:t.buyTTL}),a.createElement(b,{formMethods:S,label:"signalp.settings.timeautoclose",name:"sellByTTL",tooltip:"signalp.settings.timeautoclose.help",unit:"Hours",value:t.sellByTTL}),a.createElement(b,{formMethods:S,label:"signalp.settings.stoploss",name:"stopLoss",tooltip:"signalp.settings.stoploss.help",unit:"%",value:t.stopLoss}),a.createElement(I,{formMethods:S,label:"signalp.settings.trailingstop",name1:"trailingStopTrigger",name2:"trailingStop",tooltip:"signalp.settings.trailingstop.help",unitLeft1:"Trigger",unitLeft2:"Distance",unitRight1:"%",unitRight2:"%",value1:t.trailingStopTrigger,value2:t.trailingStop}),a.createElement(B,{label:"signalp.settings.takeprofit",onChange:function(e){N(e)},type:"takeprofit",value:t.takeProfitTargets}),a.createElement(B,{label:"signalp.settings.dca",onChange:function(e){T(e)},type:"dca",value:t.reBuyTargets}),a.createElement(b,{formMethods:S,label:"signalp.settings.maxconcurrent",name:"maxPositions",tooltip:"signalp.settings.maxconcurrent.help",unit:"#",value:t.maxPositions}),a.createElement(b,{formMethods:S,label:"signalp.settings.minvolume",name:"minVolume",tooltip:"signalp.settings.minvolume.help",unit:"BTC",value:t.minVolume}),a.createElement(b,{formMethods:S,label:"signalp.settings.limitpositions",name:"positionsPerMarket",tooltip:"signalp.settings.limitpositions.help",unit:"#",value:t.positionsPerMarket}),a.createElement(W,{formMethods:S,label:"signalp.settings.allowedside",name:"allowedSide",options:[{label:"Long",value:"long"},{label:"Short",value:"short"},{label:"Both",value:"both"}],tooltip:"signalp.settings.allowedside.help",value:t.allowedSide}),a.createElement(b,{formMethods:S,label:"signalp.settings.leverage",name:"leverage",tooltip:"signalp.settings.leverage.help",unit:"#",value:t.leverage}),a.createElement(L,{formMethods:S,label:"signalp.settings.blacklist",name:"blacklist",tooltip:"signalp.settings.blacklist.help",value:t.blacklist}),a.createElement(L,{formMethods:S,label:"signalp.settings.whitelist",name:"whitelist",tooltip:"signalp.settings.whitelist.help",value:t.whitelist}))),a.createElement(l.Z,{className:"formAction",display:"flex",flexDirection:"row",justifyContent:"flex-end"},a.createElement(u.Z,{className:"submitButton",loading:v,onClick:function(){P(F)},type:"submit"},a.createElement(d.Z,{id:"action.saveSettings"})))))},F=n(65186),$=n(66735),O=n(54846),U=n(7428),Q=n(59754),H=function(){var e=(0,O.zJ)(),t=(0,s.Z)(),n=(0,a.useState)((0,D.Sq)()),r=n[0],i=n[1];return(0,a.useEffect)((function(){var n=e.find((function(e){return e.internalId===t.provider.exchangeInternalId}));n&&i(n)}),[]),a.createElement(l.Z,{alignItems:"center",className:"noSettingsView",display:"flex",flexDirection:"column",justifyContent:"center"},a.createElement(l.Z,{alignItems:"center",className:"exchangeBox",display:"flex",flexDirection:"row",justifyContent:"center"},a.createElement(m.Z,{variant:"h3"},a.createElement(d.Z,{id:"srv.settings.empty.1"})),a.createElement(m.Z,{className:"exchangeName",variant:"h3"},a.createElement(U.Z,{exchange:r.name,size:"medium"}),a.createElement("span",null,r.internalName))),a.createElement(l.Z,{alignItems:"center",className:"cloneBox",display:"flex",flexDirection:"column",justifyContent:"center"},a.createElement(m.Z,{variant:"h3"},a.createElement(d.Z,{id:"srv.settings.empty.2"})),a.createElement(Q.Z,{provider:t.provider})))},_=function(e){var t=e.quotes,n=e.settings,o=e.loadData,c=(0,i.Z)(),m=(0,s.Z)().provider,u=(0,a.useState)(!0),p=u[0],g=u[1],f=!t||0===Object.keys(t).length,d=(0,$.Z)();return(0,a.useEffect)((function(){m.exchangeInternalId===c.internalId?g(!0):g(!1)}),[c.internalId]),a.createElement(l.Z,{className:"profileSettingsPage"},a.createElement(F.q,null,a.createElement("title",null,m.name+" - "+d.formatMessage({id:"srv.settings"})+" | "+d.formatMessage({id:"product"}))),(f||!n)&&a.createElement(l.Z,{alignItems:"center",bgcolor:"grid.content",className:"loadingBox",display:"flex",flexDirection:"row",justifyContent:"center"},a.createElement(r.Z,{color:"primary",size:40})),!f&&n&&p&&a.createElement(q,{onUpdate:o,quotes:t,settings:n}),!f&&!p&&a.createElement(H,null))}}}]);
//# sourceMappingURL=d2c88955842a0bdd4bf09545a69bdd00440260df-5c00cd00df0cc09db4ee.js.map